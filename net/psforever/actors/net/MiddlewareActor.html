<!DOCTYPE html ><html><head><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/><title>PSF-LoginServer -  master - net.psforever.actors.net.MiddlewareActor</title><meta content="PSF - LoginServer - master - net.psforever.actors.net.MiddlewareActor" name="description"/><meta content="PSF LoginServer master net.psforever.actors.net.MiddlewareActor" name="keywords"/><meta http-equiv="content-type" content="text/html; charset=UTF-8"/><link href="../../../../lib/index.css" media="screen" type="text/css" rel="stylesheet"/><link href="../../../../lib/template.css" media="screen" type="text/css" rel="stylesheet"/><link href="../../../../lib/print.css" media="print" type="text/css" rel="stylesheet"/><link href="../../../../lib/diagrams.css" media="screen" type="text/css" rel="stylesheet" id="diagrams-css"/><script type="text/javascript" src="../../../../lib/jquery.min.js"></script><script type="text/javascript" src="../../../../lib/index.js"></script><script type="text/javascript" src="../../../../index.js"></script><script type="text/javascript" src="../../../../lib/scheduler.js"></script><script type="text/javascript" src="../../../../lib/template.js"></script><script type="text/javascript">/* this variable can be used by the JS to determine the path to the root document */
var toRoot = '../../../../';</script></head><body><div id="search"><span id="doc-title">PSF-LoginServer - <span id="doc-version">master</span></span> <span class="close-results"><span class="left">&lt;</span> Back</span><div id="textfilter"><span class="input"><input autocapitalize="none" placeholder="Search" id="index-input" type="text" accesskey="/"/><i class="clear material-icons"></i><i id="search-icon" class="material-icons"></i></span></div></div><div id="search-results"><div id="search-progress"><div id="progress-fill"></div></div><div id="results-content"><div id="entity-results"></div><div id="member-results"></div></div></div><div id="content-scroll-container" style="-webkit-overflow-scrolling: touch;"><div id="content-container" style="-webkit-overflow-scrolling: touch;"><div id="subpackage-spacer"><div id="packages"><h1>Packages</h1><ul><li class="indented0 " name="_root_.root" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="_root_" class="anchorToMember"></a><a id="root:_root_" class="anchorToMember"></a> <span class="permalink"><a href="../../../../index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../../../index.html" title=""><span class="name">root</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../../../index.html" name="_root_" id="_root_" class="extype">root</a></dd></dl></div></li><li class="indented1 " name="_root_.net" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="net" class="anchorToMember"></a><a id="net:net" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../../index.html" title=""><span class="name">net</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../../../index.html" name="_root_" id="_root_" class="extype">root</a></dd></dl></div></li><li class="indented2 " name="net.psforever" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="psforever" class="anchorToMember"></a><a id="psforever:psforever" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../../index.html" title=""><span class="name">psforever</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../../index.html" name="net" id="net" class="extype">net</a></dd></dl></div></li><li class="indented3 " name="net.psforever.actors" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="actors" class="anchorToMember"></a><a id="actors:actors" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="../index.html" title=""><span class="name">actors</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../../index.html" name="net.psforever" id="net.psforever" class="extype">psforever</a></dd></dl></div></li><li class="indented4 " name="net.psforever.actors.net" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="net" class="anchorToMember"></a><a id="net:net" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/index.html" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">package</span></span> <span class="symbol"><a href="index.html" title=""><span class="name">net</span></a></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd><a href="../index.html" name="net.psforever.actors" id="net.psforever.actors" class="extype">actors</a></dd></dl></div></li><li class="current-entities indented4"><span class="separator"></span> <a href="LoginActor.html" title="" class="class"></a><a href="LoginActor.html" title="">LoginActor</a></li><li class="current-entities indented4"><a href="MiddlewareActor$.html" title="MiddlewareActor sits between the raw UDP socket and the &quot;main&quot; actors (either LoginActor or SessionActor) and handles crypto and control packets." class="object"></a> <a href="" title="MiddlewareActor sits between the raw UDP socket and the &quot;main&quot; actors (either login or session) and handles crypto and control packets." class="class"></a><a href="" title="MiddlewareActor sits between the raw UDP socket and the &quot;main&quot; actors (either login or session) and handles crypto and control packets.">MiddlewareActor</a></li><li class="current-entities indented4"><a href="SocketActor$.html" title="SocketActor creates a UDP socket, receives packets and forwards them to MiddlewareActor There is only one SocketActor, but each connected client gets its own MiddlewareActor" class="object"></a> <a href="SocketActor.html" title="" class="class"></a><a href="SocketActor.html" title="">SocketActor</a></li></ul></div></div><div id="content"><body class="class type"><div id="definition"><a href="MiddlewareActor$.html" title="See companion object"><div class="big-circle class-companion-object">c</div></a><p id="owner"><a href="../../../index.html" name="net" id="net" class="extype">net</a>.<a href="../../index.html" name="net.psforever" id="net.psforever" class="extype">psforever</a>.<a href="../index.html" name="net.psforever.actors" id="net.psforever.actors" class="extype">actors</a>.<a href="index.html" name="net.psforever.actors.net" id="net.psforever.actors.net" class="extype">net</a></p><h1><a href="MiddlewareActor$.html" title="See companion object">MiddlewareActor</a><span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html" title="Permalink"><i class="material-icons"></i></a></span></h1><h3><span class="morelinks"><div>Companion <a href="MiddlewareActor$.html" title="See companion object">object MiddlewareActor</a></div></span></h3></div><h4 id="signature" class="signature"><span class="modifier_kind"><span class="modifier"></span> <span class="kind">class</span></span> <span class="symbol"><span class="name">MiddlewareActor</span><span class="result"> extends <span name="scala.AnyRef" class="extype">AnyRef</span></span></span></h4><div id="comment" class="fullcommenttop"><div class="comment cmt"><p>MiddlewareActor sits between the raw UDP socket and the "main" actors (either login or session) and handles
crypto and control packets. This means it sets up cryptography, it decodes incoming packets,
it encodes, bundles and splits outgoing packets, it handles things like requesting/resending lost packets and more.
</p></div><dl class="attributes block"><dt>Source</dt><dd><a href="https://github.com/psforever/PSF-LoginServer/blob/master//home/runner/work/PSF-LoginServer/PSF-LoginServer/src/main/scala/net/psforever/actors/net/MiddlewareActor.scala" target="_blank">MiddlewareActor.scala</a></dd></dl><div class="toggleContainer"><div class="toggle block"><span>Linear Supertypes</span><div class="superTypes hiddenContent"><span name="scala.AnyRef" class="extype">AnyRef</span>, <span name="scala.Any" class="extype">Any</span></div></div></div></div><div id="mbrsel"><div class="toggle"></div><div id="memberfilter"><i class="material-icons arrow"></i><span class="input"><input placeholder="Filter all members" id="mbrsel-input" type="text" accesskey="/"/></span><i class="clear material-icons"></i></div><div id="filterby"><div id="order"><span class="filtertype">Ordering</span><ol><li class="alpha in"><span>Alphabetic</span></li><li class="inherit out"><span>By Inheritance</span></li></ol></div><div class="ancestors"><span class="filtertype">Inherited<br/></span><ol id="linearization"><li class="in" name="net.psforever.actors.net.MiddlewareActor"><span>MiddlewareActor</span></li><li class="in" name="scala.AnyRef"><span>AnyRef</span></li><li class="in" name="scala.Any"><span>Any</span></li></ol></div><div class="ancestors"><span class="filtertype"></span><ol><li class="hideall out"><span>Hide All</span></li><li class="showall in"><span>Show All</span></li></ol></div><div id="visbl"><span class="filtertype">Visibility</span><ol><li class="public in"><span>Public</span></li><li class="protected out"><span>Protected</span></li></ol></div></div></div><div id="template"><div id="allMembers"><div id="constructors" class="members"><h3>Instance Constructors</h3><ol><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#&lt;init&gt;" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="&lt;init&gt;(context:akka.actor.typed.scaladsl.ActorContext[net.psforever.actors.net.MiddlewareActor.Command],socket:akka.actor.typed.ActorRef[akka.io.Udp.Command],sender:java.net.InetSocketAddress,next:(akka.actor.typed.ActorRef[net.psforever.actors.net.MiddlewareActor.Command],java.net.InetSocketAddress,String)=&gt;akka.actor.typed.Behavior[net.psforever.packet.PlanetSidePacket],connectionId:String):net.psforever.actors.net.MiddlewareActor" class="anchorToMember"></a><a id="&lt;init&gt;:MiddlewareActor" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#&lt;init&gt;(context:akka.actor.typed.scaladsl.ActorContext[net.psforever.actors.net.MiddlewareActor.Command],socket:akka.actor.typed.ActorRef[akka.io.Udp.Command],sender:java.net.InetSocketAddress,next:(akka.actor.typed.ActorRef[net.psforever.actors.net.MiddlewareActor.Command],java.net.InetSocketAddress,String)=&gt;akka.actor.typed.Behavior[net.psforever.packet.PlanetSidePacket],connectionId:String):net.psforever.actors.net.MiddlewareActor" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">new</span></span> <span class="symbol"><span class="name">MiddlewareActor</span><span class="params">(<span name="context">context: <span name="akka.actor.typed.scaladsl.ActorContext" class="extype">ActorContext</span>[<a href="MiddlewareActor$$Command.html" name="net.psforever.actors.net.MiddlewareActor.Command" id="net.psforever.actors.net.MiddlewareActor.Command" class="extype">Command</a>]</span>, <span name="socket">socket: <span name="akka.actor.typed.ActorRef" class="extype">ActorRef</span>[<span name="akka.io.Udp.Command" class="extype">Command</span>]</span>, <span name="sender">sender: <a href="https://docs.oracle.com/javase/8/docs/api/java/net/InetSocketAddress.html#java.net.InetSocketAddress" name="java.net.InetSocketAddress" id="java.net.InetSocketAddress" class="extype">InetSocketAddress</a></span>, <span name="next">next: (<span name="akka.actor.typed.ActorRef" class="extype">ActorRef</span>[<a href="MiddlewareActor$$Command.html" name="net.psforever.actors.net.MiddlewareActor.Command" id="net.psforever.actors.net.MiddlewareActor.Command" class="extype">Command</a>], <a href="https://docs.oracle.com/javase/8/docs/api/java/net/InetSocketAddress.html#java.net.InetSocketAddress" name="java.net.InetSocketAddress" id="java.net.InetSocketAddress" class="extype">InetSocketAddress</a>, <span name="scala.Predef.String" class="extype">String</span>) =&gt; <span name="akka.actor.typed.Behavior" class="extype">Behavior</span>[<a href="../../packet/PlanetSidePacket.html" name="net.psforever.packet.PlanetSidePacket" id="net.psforever.packet.PlanetSidePacket" class="extype">PlanetSidePacket</a>]</span>, <span name="connectionId">connectionId: <span name="scala.Predef.String" class="extype">String</span></span>)</span></span></li></ol></div><div class="values members"><h3>Value Members</h3><ol><li class="indented0 " name="scala.AnyRef#!=" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="!=(x$1:Any):Boolean" class="anchorToMember"></a><a id="!=(Any):Boolean" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#!=(x$1:Any):Boolean" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name" title="gt4s: $bang$eq">!=</span><span class="params">(<span name="arg0">arg0: <span name="scala.Any" class="extype">Any</span></span>)</span><span class="result">: <span name="scala.Boolean" class="extype">Boolean</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef → Any</dd></dl></div></li><li class="indented0 " name="scala.AnyRef###" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="##:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html###:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name" title="gt4s: $hash$hash">##</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef → Any</dd></dl></div></li><li class="indented0 " name="scala.AnyRef#==" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="==(x$1:Any):Boolean" class="anchorToMember"></a><a id="==(Any):Boolean" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#==(x$1:Any):Boolean" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name" title="gt4s: $eq$eq">==</span><span class="params">(<span name="arg0">arg0: <span name="scala.Any" class="extype">Any</span></span>)</span><span class="result">: <span name="scala.Boolean" class="extype">Boolean</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef → Any</dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#acceptedSmpSubslot" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="acceptedSmpSubslot:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#acceptedSmpSubslot:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">var</span></span> <span class="symbol"><span class="name">acceptedSmpSubslot</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#active" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="active():akka.actor.typed.Behavior[net.psforever.actors.net.MiddlewareActor.Command]" class="anchorToMember"></a><a id="active():Behavior[Command]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#active():akka.actor.typed.Behavior[net.psforever.actors.net.MiddlewareActor.Command]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">active</span><span class="params">()</span><span class="result">: <span name="akka.actor.typed.Behavior" class="extype">Behavior</span>[<a href="MiddlewareActor$$Command.html" name="net.psforever.actors.net.MiddlewareActor.Command" id="net.psforever.actors.net.MiddlewareActor.Command" class="extype">Command</a>]</span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#activeNormal" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="activeNormal(packet:net.psforever.packet.PlanetSidePacket,sequence:Int):Unit" class="anchorToMember"></a><a id="activeNormal(PlanetSidePacket,Int):Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#activeNormal(packet:net.psforever.packet.PlanetSidePacket,sequence:Int):Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">activeNormal</span><span class="params">(<span name="packet">packet: <a href="../../packet/PlanetSidePacket.html" name="net.psforever.packet.PlanetSidePacket" id="net.psforever.packet.PlanetSidePacket" class="extype">PlanetSidePacket</a></span>, <span name="sequence">sequence: <span name="scala.Int" class="extype">Int</span></span>)</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><p class="shortcomment cmt">Properly handle the newly-arrived packet based on its sequence number.</p><div class="fullcomment"><div class="comment cmt"><p>Properly handle the newly-arrived packet based on its sequence number.
If the packet is in the proper order, or is considered old, by its sequence number,
act on the packet immediately.
If the sequence if higher than the next one expected, indicating that some packets may have been missed,
put that packet to the side and active a resolution queue.</p></div><dl class="paramcmts block"><dt class="param">packet</dt><dd class="cmt"><p>the packet</p></dd><dt class="param">sequence</dt><dd class="cmt"><p>the sequence number obtained from the packet</p></dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#activeWithReordering" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="activeWithReordering(packet:net.psforever.packet.PlanetSidePacket,sequence:Int):Unit" class="anchorToMember"></a><a id="activeWithReordering(PlanetSidePacket,Int):Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#activeWithReordering(packet:net.psforever.packet.PlanetSidePacket,sequence:Int):Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">activeWithReordering</span><span class="params">(<span name="packet">packet: <a href="../../packet/PlanetSidePacket.html" name="net.psforever.packet.PlanetSidePacket" id="net.psforever.packet.PlanetSidePacket" class="extype">PlanetSidePacket</a></span>, <span name="sequence">sequence: <span name="scala.Int" class="extype">Int</span></span>)</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><p class="shortcomment cmt">Properly handle the newly-arrived packet based on its sequence number,
with an ongoing resolution queue for managing out of sequence packets.</p><div class="fullcomment"><div class="comment cmt"><p>Properly handle the newly-arrived packet based on its sequence number,
with an ongoing resolution queue for managing out of sequence packets.
If the packet is in the proper order, or is considered old, by its sequence number,
act on the packet immediately.
If the packet is considered a packet that was expected in the past,
attempt to clear it from the queue and test the resolution queue for further work.
If the sequence if higher than the next one expected, indicating that some packets may have been missed,
add it to the resolution queue.
Finally, act on the state of the resolution queue.</p></div><dl class="paramcmts block"><dt class="param">packet</dt><dd class="cmt"><p>the packet</p></dd><dt class="param">sequence</dt><dd class="cmt"><p>the sequence number obtained from the packet</p></dd></dl></div></li><li class="indented0 " name="scala.Any#asInstanceOf" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="asInstanceOf[T0]:T0" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#asInstanceOf[T0]:T0" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">asInstanceOf</span><span class="tparams">[<span name="T0">T0</span>]</span><span class="result">: <span name="scala.Any.asInstanceOf.T0" class="extype">T0</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>Any</dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#askForMissingSubslots" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="askForMissingSubslots():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#askForMissingSubslots():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">askForMissingSubslots</span><span class="params">()</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><p class="shortcomment cmt">Start making requests for missing <code>SlottedMetaPackets</code>
if no prior requests were prepared.</p><div class="fullcomment"><div class="comment cmt"><p>Start making requests for missing <code>SlottedMetaPackets</code>
if no prior requests were prepared.
Start the scheduled task and handle the dispatched requests.</p></div><dl class="attributes block"><dt>See also</dt><dd><span class="cmt"><p><code>processRequestsForMissingSubslots</code></p></span></dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#clientNonce" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="clientNonce:Long" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#clientNonce:Long" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">var</span></span> <span class="symbol"><span class="name">clientNonce</span><span class="result">: <span name="scala.Long" class="extype">Long</span></span></span></li><li class="indented0 " name="scala.AnyRef#clone" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="prt"><a id="clone():Object" class="anchorToMember"></a><a id="clone():AnyRef" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#clone():Object" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">clone</span><span class="params">()</span><span class="result">: <span name="scala.AnyRef" class="extype">AnyRef</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Attributes</dt><dd>protected[<span name="java.lang" class="extype">lang</span>] </dd><dt>Definition Classes</dt><dd>AnyRef</dd><dt>Annotations</dt><dd><span class="name">@throws</span><span class="args">(<span><span class="defval">classOf[java.lang.CloneNotSupportedException]</span></span>)</span> <span class="name">@native</span><span class="args">()</span> </dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#connectionClose" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="connectionClose():akka.actor.typed.Behavior[net.psforever.actors.net.MiddlewareActor.Command]" class="anchorToMember"></a><a id="connectionClose():Behavior[Command]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#connectionClose():akka.actor.typed.Behavior[net.psforever.actors.net.MiddlewareActor.Command]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">connectionClose</span><span class="params">()</span><span class="result">: <span name="akka.actor.typed.Behavior" class="extype">Behavior</span>[<a href="MiddlewareActor$$Command.html" name="net.psforever.actors.net.MiddlewareActor.Command" id="net.psforever.actors.net.MiddlewareActor.Command" class="extype">Command</a>]</span></span><p class="shortcomment cmt">End client-server ops.</p><div class="fullcomment"><div class="comment cmt"><p>End client-server ops.
End messaging capabilities.
</p></div></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#crypto" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="crypto:Option[net.psforever.packet.PacketCoding.CryptoCoding]" class="anchorToMember"></a><a id="crypto:Option[CryptoCoding]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#crypto:Option[net.psforever.packet.PacketCoding.CryptoCoding]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">var</span></span> <span class="symbol"><span class="name">crypto</span><span class="result">: <span name="scala.Option" class="extype">Option</span>[<a href="../../packet/PacketCoding$$CryptoCoding.html" name="net.psforever.packet.PacketCoding.CryptoCoding" id="net.psforever.packet.PacketCoding.CryptoCoding" class="extype">CryptoCoding</a>]</span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#cryptoFinish" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="cryptoFinish(dh:net.psforever.util.DiffieHellman,clientChallenge:scodec.bits.ByteVector,serverChallenge:scodec.bits.ByteVector):akka.actor.typed.Behavior[net.psforever.actors.net.MiddlewareActor.Command]" class="anchorToMember"></a><a id="cryptoFinish(DiffieHellman,ByteVector,ByteVector):Behavior[Command]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#cryptoFinish(dh:net.psforever.util.DiffieHellman,clientChallenge:scodec.bits.ByteVector,serverChallenge:scodec.bits.ByteVector):akka.actor.typed.Behavior[net.psforever.actors.net.MiddlewareActor.Command]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">cryptoFinish</span><span class="params">(<span name="dh">dh: <a href="../../util/DiffieHellman.html" name="net.psforever.util.DiffieHellman" id="net.psforever.util.DiffieHellman" class="extype">DiffieHellman</a></span>, <span name="clientChallenge">clientChallenge: <span name="scodec.bits.ByteVector" class="extype">ByteVector</span></span>, <span name="serverChallenge">serverChallenge: <span name="scodec.bits.ByteVector" class="extype">ByteVector</span></span>)</span><span class="result">: <span name="akka.actor.typed.Behavior" class="extype">Behavior</span>[<a href="MiddlewareActor$$Command.html" name="net.psforever.actors.net.MiddlewareActor.Command" id="net.psforever.actors.net.MiddlewareActor.Command" class="extype">Command</a>]</span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#cryptoSetup" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="cryptoSetup():akka.actor.typed.Behavior[net.psforever.actors.net.MiddlewareActor.Command]" class="anchorToMember"></a><a id="cryptoSetup():Behavior[Command]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#cryptoSetup():akka.actor.typed.Behavior[net.psforever.actors.net.MiddlewareActor.Command]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">cryptoSetup</span><span class="params">()</span><span class="result">: <span name="akka.actor.typed.Behavior" class="extype">Behavior</span>[<a href="MiddlewareActor$$Command.html" name="net.psforever.actors.net.MiddlewareActor.Command" id="net.psforever.actors.net.MiddlewareActor.Command" class="extype">Command</a>]</span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#ec" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="ec:scala.concurrent.ExecutionContextExecutor" class="anchorToMember"></a><a id="ec:ExecutionContextExecutor" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#ec:scala.concurrent.ExecutionContextExecutor" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">implicit </span> <span class="kind">val</span></span> <span class="symbol"><span class="name">ec</span><span class="result">: <span name="scala.concurrent.ExecutionContextExecutor" class="extype">ExecutionContextExecutor</span></span></span></li><li class="indented0 " name="scala.AnyRef#eq" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="eq(x$1:AnyRef):Boolean" class="anchorToMember"></a><a id="eq(AnyRef):Boolean" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#eq(x$1:AnyRef):Boolean" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">eq</span><span class="params">(<span name="arg0">arg0: <span name="scala.AnyRef" class="extype">AnyRef</span></span>)</span><span class="result">: <span name="scala.Boolean" class="extype">Boolean</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd></dl></div></li><li class="indented0 " name="scala.AnyRef#equals" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="equals(x$1:Object):Boolean" class="anchorToMember"></a><a id="equals(AnyRef):Boolean" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#equals(x$1:Object):Boolean" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">equals</span><span class="params">(<span name="arg0">arg0: <span name="scala.AnyRef" class="extype">AnyRef</span></span>)</span><span class="result">: <span name="scala.Boolean" class="extype">Boolean</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef → Any</dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#executor" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="executor:scala.concurrent.ExecutionContext" class="anchorToMember"></a><a id="executor:ExecutionContext" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#executor:scala.concurrent.ExecutionContext" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">implicit </span> <span class="kind">val</span></span> <span class="symbol"><span class="name">executor</span><span class="result">: <span name="scala.concurrent.ExecutionContext" class="extype">ExecutionContext</span></span></span></li><li class="indented0 " name="scala.AnyRef#finalize" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="prt"><a id="finalize():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#finalize():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">finalize</span><span class="params">()</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Attributes</dt><dd>protected[<span name="java.lang" class="extype">lang</span>] </dd><dt>Definition Classes</dt><dd>AnyRef</dd><dt>Annotations</dt><dd><span class="name">@throws</span><span class="args">(<span><span class="symbol">classOf[java.lang.Throwable]</span></span>)</span> </dd></dl></div></li><li class="indented0 " name="scala.AnyRef#getClass" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="getClass():Class[_]" class="anchorToMember"></a><a id="getClass():Class[_&lt;:AnyRef]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#getClass():Class[_]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">getClass</span><span class="params">()</span><span class="result">: <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#java.lang.Class" name="java.lang.Class" id="java.lang.Class" class="extype">Class</a>[_ &lt;: <span name="scala.AnyRef" class="extype">AnyRef</span>]</span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef → Any</dd><dt>Annotations</dt><dd><span class="name">@native</span><span class="args">()</span> </dd></dl></div></li><li class="indented0 " name="scala.AnyRef#hashCode" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="hashCode():Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#hashCode():Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">hashCode</span><span class="params">()</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef → Any</dd><dt>Annotations</dt><dd><span class="name">@native</span><span class="args">()</span> </dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#in" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="in(packet:scodec.Attempt[net.psforever.packet.PlanetSidePacket]):Unit" class="anchorToMember"></a><a id="in(Attempt[PlanetSidePacket]):Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#in(packet:scodec.Attempt[net.psforever.packet.PlanetSidePacket]):Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">in</span><span class="params">(<span name="packet">packet: <span name="scodec.Attempt" class="extype">Attempt</span>[<a href="../../packet/PlanetSidePacket.html" name="net.psforever.packet.PlanetSidePacket" id="net.psforever.packet.PlanetSidePacket" class="extype">PlanetSidePacket</a>]</span>)</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#in" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="in(packet:net.psforever.packet.PlanetSidePacket):akka.actor.typed.Behavior[net.psforever.actors.net.MiddlewareActor.Command]" class="anchorToMember"></a><a id="in(PlanetSidePacket):Behavior[Command]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#in(packet:net.psforever.packet.PlanetSidePacket):akka.actor.typed.Behavior[net.psforever.actors.net.MiddlewareActor.Command]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">in</span><span class="params">(<span name="packet">packet: <a href="../../packet/PlanetSidePacket.html" name="net.psforever.packet.PlanetSidePacket" id="net.psforever.packet.PlanetSidePacket" class="extype">PlanetSidePacket</a></span>)</span><span class="result">: <span name="akka.actor.typed.Behavior" class="extype">Behavior</span>[<a href="MiddlewareActor$$Command.html" name="net.psforever.actors.net.MiddlewareActor.Command" id="net.psforever.actors.net.MiddlewareActor.Command" class="extype">Command</a>]</span></span><p class="shortcomment cmt">Handle incoming packet</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#inReorderQueueTest" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="inReorderQueueTest():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#inReorderQueueTest():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">inReorderQueueTest</span><span class="params">()</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><p class="shortcomment cmt">If the inbound reorder queue is empty, do no more work on it until work is available.</p><div class="fullcomment"><div class="comment cmt"><p>If the inbound reorder queue is empty, do no more work on it until work is available.
Otherwise, do work on whatever is at the front of the queue, and do not test again until explicitly requested.
Test the queue for more contents after removing content from it.
</p></div></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#inReorderTimeout" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="inReorderTimeout:scala.concurrent.duration.FiniteDuration" class="anchorToMember"></a><a id="inReorderTimeout:FiniteDuration" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#inReorderTimeout:scala.concurrent.duration.FiniteDuration" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">inReorderTimeout</span><span class="result">: <span name="scala.concurrent.duration.FiniteDuration" class="extype">FiniteDuration</span></span></span><p class="shortcomment cmt">how long packets that are out of sequential order wait for the missing sequence before being expedited (ms)</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#inSequence" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="inSequence:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#inSequence:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">var</span></span> <span class="symbol"><span class="name">inSequence</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span><p class="shortcomment cmt">Latest incoming sequence number</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#inSubslot" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="inSubslot:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#inSubslot:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">var</span></span> <span class="symbol"><span class="name">inSubslot</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span><p class="shortcomment cmt">Latest incoming subslot number</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#inSubslotMissingDelay" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="inSubslotMissingDelay:scala.concurrent.duration.FiniteDuration" class="anchorToMember"></a><a id="inSubslotMissingDelay:FiniteDuration" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#inSubslotMissingDelay:scala.concurrent.duration.FiniteDuration" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">inSubslotMissingDelay</span><span class="result">: <span name="scala.concurrent.duration.FiniteDuration" class="extype">FiniteDuration</span></span></span><p class="shortcomment cmt">how long to wait between repeated requests for packets with known missing subslot numbers (ms)</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#inSubslotMissingNumberOfAttempts" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="inSubslotMissingNumberOfAttempts:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#inSubslotMissingNumberOfAttempts:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">inSubslotMissingNumberOfAttempts</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span><p class="shortcomment cmt">how many time to repeat the request for a packet with a known missing subslot number</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#inSubslotMissingRequests" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="inSubslotMissingRequests(slot:Int,subslot:Int,inner:scodec.bits.ByteVector):Unit" class="anchorToMember"></a><a id="inSubslotMissingRequests(Int,Int,ByteVector):Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#inSubslotMissingRequests(slot:Int,subslot:Int,inner:scodec.bits.ByteVector):Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">inSubslotMissingRequests</span><span class="params">(<span name="slot">slot: <span name="scala.Int" class="extype">Int</span></span>, <span name="subslot">subslot: <span name="scala.Int" class="extype">Int</span></span>, <span name="inner">inner: <span name="scodec.bits.ByteVector" class="extype">ByteVector</span></span>)</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><p class="shortcomment cmt">What to do with an inbound <code>SlottedMetaPacket</code> control packet when the subslots are in disarray.</p><div class="fullcomment"><div class="comment cmt"><p>What to do with an inbound <code>SlottedMetaPacket</code> control packet when the subslots are in disarray.
Whenever a subslot arrives prior to the current highest, removing that subslot from the request list is possible.
If the proper next subslot arrives, proceeding like normal is fine.
Do not, however, send any <code>ResultB</code> confirmations until no more requests are outstanding.</p></div><dl class="paramcmts block"><dt class="param">slot</dt><dd class="cmt"><p>the SMP slot (related to the opcode)</p></dd><dt class="param">subslot</dt><dd class="cmt"><p>the SMP subslot (related to the expected order of packets)</p></dd><dt class="param">inner</dt><dd class="cmt"><p>the contents of this SMP</p></dd></dl><dl class="attributes block"><dt>See also</dt><dd><span class="cmt"><p><code>in</code></p></span><span class="cmt"><p><code>inSubslotsMissingRequestsFinished</code></p></span><span class="cmt"><p><code>PacketCoding.decodePacket</code></p></span></dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#inSubslotNotMissing" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="inSubslotNotMissing(slot:Int,subslot:Int,inner:scodec.bits.ByteVector):Unit" class="anchorToMember"></a><a id="inSubslotNotMissing(Int,Int,ByteVector):Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#inSubslotNotMissing(slot:Int,subslot:Int,inner:scodec.bits.ByteVector):Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">inSubslotNotMissing</span><span class="params">(<span name="slot">slot: <span name="scala.Int" class="extype">Int</span></span>, <span name="subslot">subslot: <span name="scala.Int" class="extype">Int</span></span>, <span name="inner">inner: <span name="scodec.bits.ByteVector" class="extype">ByteVector</span></span>)</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><p class="shortcomment cmt">What to do with a <code>SlottedMetaPacket</code> control packet normally.</p><div class="fullcomment"><div class="comment cmt"><p>What to do with a <code>SlottedMetaPacket</code> control packet normally.
The typical approach, when the subslot is the expected next number, is to merely receive the packet
and dispatch a confirmation.
When the subslot is farther ahead of what is expected,
requests need to be logged for the missing subslots.</p></div><dl class="paramcmts block"><dt class="param">slot</dt><dd class="cmt"><p>the SMP slot (related to the opcode)</p></dd><dt class="param">subslot</dt><dd class="cmt"><p>the SMP subslot (related to the expected order of packets)</p></dd><dt class="param">inner</dt><dd class="cmt"><p>the contents of this SMP</p></dd></dl><dl class="attributes block"><dt>See also</dt><dd><span class="cmt"><p><code>askForMissingSubslots</code></p></span><span class="cmt"><p><code>in</code></p></span><span class="cmt"><p><code>inSubslotMissingRequests</code></p></span><span class="cmt"><p><code>PacketCoding.decodePacket</code></p></span><span class="cmt"><p><code>RelatedB</code></p></span></dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#inSubslotsMissing" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="inSubslotsMissing:scala.collection.mutable.Map[Int,Int]" class="anchorToMember"></a><a id="inSubslotsMissing:Map[Int,Int]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#inSubslotsMissing:scala.collection.mutable.Map[Int,Int]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">inSubslotsMissing</span><span class="result">: <span name="scala.collection.mutable.Map" class="extype">Map</span>[<span name="scala.Int" class="extype">Int</span>, <span name="scala.Int" class="extype">Int</span>]</span></span><p class="shortcomment cmt">List of missing subslot numbers and attempts counter</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#inSubslotsMissingRequestsFinished" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="inSubslotsMissingRequestsFinished(slot:Int):Unit" class="anchorToMember"></a><a id="inSubslotsMissingRequestsFinished(Int):Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#inSubslotsMissingRequestsFinished(slot:Int):Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">inSubslotsMissingRequestsFinished</span><span class="params">(<span name="slot">slot: <span name="scala.Int" class="extype">Int</span> = <span class="symbol">0</span></span>)</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><p class="shortcomment cmt">If there are no more requests for missing subslots,
resume normal operations when acting upon inbound <code>SlottedMetaPacket</code> packets.</p><div class="fullcomment"><div class="comment cmt"><p>If there are no more requests for missing subslots,
resume normal operations when acting upon inbound <code>SlottedMetaPacket</code> packets.</p></div><dl class="paramcmts block"><dt class="param">slot</dt><dd class="cmt"><p>the optional slot to report the "first" <code>RelatedB</code> in a "while"</p></dd></dl></div></li><li class="indented0 " name="scala.Any#isInstanceOf" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="isInstanceOf[T0]:Boolean" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#isInstanceOf[T0]:Boolean" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">isInstanceOf</span><span class="tparams">[<span name="T0">T0</span>]</span><span class="result">: <span name="scala.Boolean" class="extype">Boolean</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>Any</dd></dl></div></li><li class="indented0 " name="scala.AnyRef#ne" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="ne(x$1:AnyRef):Boolean" class="anchorToMember"></a><a id="ne(AnyRef):Boolean" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#ne(x$1:AnyRef):Boolean" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">ne</span><span class="params">(<span name="arg0">arg0: <span name="scala.AnyRef" class="extype">AnyRef</span></span>)</span><span class="result">: <span name="scala.Boolean" class="extype">Boolean</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#nextActor" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="nextActor:akka.actor.typed.ActorRef[net.psforever.packet.PlanetSidePacket]" class="anchorToMember"></a><a id="nextActor:ActorRef[PlanetSidePacket]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#nextActor:akka.actor.typed.ActorRef[net.psforever.packet.PlanetSidePacket]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">nextActor</span><span class="result">: <span name="akka.actor.typed.ActorRef" class="extype">ActorRef</span>[<a href="../../packet/PlanetSidePacket.html" name="net.psforever.packet.PlanetSidePacket" id="net.psforever.packet.PlanetSidePacket" class="extype">PlanetSidePacket</a>]</span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#nextSequence" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="nextSequence:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#nextSequence:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">nextSequence</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span><p class="shortcomment cmt">Increment the outbound sequence number.</p><div class="fullcomment"><div class="comment cmt"><p>Increment the outbound sequence number.
The previous sequence number is returned.
The fidelity of the sequence field in packets is 16 bits, so wrap back to 0 after 65535.</p></div></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#nextSmpIndex" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="nextSmpIndex:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#nextSmpIndex:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">var</span></span> <span class="symbol"><span class="name">nextSmpIndex</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#nextSubslot" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="nextSubslot:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#nextSubslot:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">nextSubslot</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span><p class="shortcomment cmt">Increment the outbound subslot number.</p><div class="fullcomment"><div class="comment cmt"><p>Increment the outbound subslot number.
The previous subslot number is returned.
The fidelity of the subslot field in <code>SlottedMetapacket</code>'s is 16 bits, so wrap back to 0 after 65535.</p></div></div></li><li class="indented0 " name="scala.AnyRef#notify" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="notify():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#notify():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">notify</span><span class="params">()</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd><dt>Annotations</dt><dd><span class="name">@native</span><span class="args">()</span> </dd></dl></div></li><li class="indented0 " name="scala.AnyRef#notifyAll" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="notifyAll():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#notifyAll():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">notifyAll</span><span class="params">()</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd><dt>Annotations</dt><dd><span class="name">@native</span><span class="args">()</span> </dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#onSignal" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="onSignal:PartialFunction[(akka.actor.typed.scaladsl.ActorContext[net.psforever.actors.net.MiddlewareActor.Command],akka.actor.typed.Signal),akka.actor.typed.Behavior[net.psforever.actors.net.MiddlewareActor.Command]]" class="anchorToMember"></a><a id="onSignal:PartialFunction[(ActorContext[Command],Signal),Behavior[Command]]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#onSignal:PartialFunction[(akka.actor.typed.scaladsl.ActorContext[net.psforever.actors.net.MiddlewareActor.Command],akka.actor.typed.Signal),akka.actor.typed.Behavior[net.psforever.actors.net.MiddlewareActor.Command]]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">onSignal</span><span class="result">: <span name="scala.PartialFunction" class="extype">PartialFunction</span>[(<span name="akka.actor.typed.scaladsl.ActorContext" class="extype">ActorContext</span>[<a href="MiddlewareActor$$Command.html" name="net.psforever.actors.net.MiddlewareActor.Command" id="net.psforever.actors.net.MiddlewareActor.Command" class="extype">Command</a>], <span name="akka.actor.typed.Signal" class="extype">Signal</span>), <span name="akka.actor.typed.Behavior" class="extype">Behavior</span>[<a href="MiddlewareActor$$Command.html" name="net.psforever.actors.net.MiddlewareActor.Command" id="net.psforever.actors.net.MiddlewareActor.Command" class="extype">Command</a>]]</span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#out" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="out(packet:net.psforever.packet.PlanetSidePacket):Unit" class="anchorToMember"></a><a id="out(PlanetSidePacket):Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#out(packet:net.psforever.packet.PlanetSidePacket):Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">out</span><span class="params">(<span name="packet">packet: <a href="../../packet/PlanetSidePacket.html" name="net.psforever.packet.PlanetSidePacket" id="net.psforever.packet.PlanetSidePacket" class="extype">PlanetSidePacket</a></span>)</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><p class="shortcomment cmt">Handle outgoing packet</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#outQueue" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="outQueue:scala.collection.mutable.Queue[(net.psforever.packet.PlanetSidePacket,scodec.bits.BitVector)]" class="anchorToMember"></a><a id="outQueue:Queue[(PlanetSidePacket,BitVector)]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#outQueue:scala.collection.mutable.Queue[(net.psforever.packet.PlanetSidePacket,scodec.bits.BitVector)]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">outQueue</span><span class="result">: <span name="scala.collection.mutable.Queue" class="extype">Queue</span>[(<a href="../../packet/PlanetSidePacket.html" name="net.psforever.packet.PlanetSidePacket" id="net.psforever.packet.PlanetSidePacket" class="extype">PlanetSidePacket</a>, <span name="scodec.bits.BitVector" class="extype">BitVector</span>)]</span></span><p class="shortcomment cmt">Queue of outgoing packets used for bundling and splitting</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#outQueueBundled" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="outQueueBundled:scala.collection.mutable.Queue[net.psforever.packet.PlanetSidePacket]" class="anchorToMember"></a><a id="outQueueBundled:Queue[PlanetSidePacket]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#outQueueBundled:scala.collection.mutable.Queue[net.psforever.packet.PlanetSidePacket]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">outQueueBundled</span><span class="result">: <span name="scala.collection.mutable.Queue" class="extype">Queue</span>[<a href="../../packet/PlanetSidePacket.html" name="net.psforever.packet.PlanetSidePacket" id="net.psforever.packet.PlanetSidePacket" class="extype">PlanetSidePacket</a>]</span></span><p class="shortcomment cmt">Queue of outgoing packets ready for sending</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#outSequence" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="outSequence:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#outSequence:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">var</span></span> <span class="symbol"><span class="name">outSequence</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span><p class="shortcomment cmt">Latest outbound sequence number</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#outSubslot" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="outSubslot:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#outSubslot:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">var</span></span> <span class="symbol"><span class="name">outSubslot</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span><p class="shortcomment cmt">Latest outbound subslot number;
the current subslot is one less than this number
</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#packetProcessor" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="packetProcessor:akka.actor.Cancellable" class="anchorToMember"></a><a id="packetProcessor:Cancellable" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#packetProcessor:akka.actor.Cancellable" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">var</span></span> <span class="symbol"><span class="name">packetProcessor</span><span class="result">: <span name="akka.actor.Cancellable" class="extype">Cancellable</span></span></span><p class="shortcomment cmt">Timer that handles the bundling and throttling of outgoing packets and resolves disorganized inbound packets</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#packetProcessorDelay" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="packetProcessorDelay:scala.concurrent.duration.FiniteDuration" class="anchorToMember"></a><a id="packetProcessorDelay:FiniteDuration" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#packetProcessorDelay:scala.concurrent.duration.FiniteDuration" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">packetProcessorDelay</span><span class="result">: <span name="scala.concurrent.duration.FiniteDuration" class="extype">FiniteDuration</span></span></span><p class="shortcomment cmt">Delay between runs of the packet bundler/resolver timer (ms);
250ms per network update (client upstream), so 10 runs of this bundling code every update
</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#packetsBundledByThemselves" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="packetsBundledByThemselves:List[net.psforever.packet.PlanetSidePacket=&gt;Boolean]" class="anchorToMember"></a><a id="packetsBundledByThemselves:List[(PlanetSidePacket)=&gt;Boolean]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#packetsBundledByThemselves:List[net.psforever.packet.PlanetSidePacket=&gt;Boolean]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">packetsBundledByThemselves</span><span class="result">: <span name="scala.List" class="extype">List</span>[(<a href="../../packet/PlanetSidePacket.html" name="net.psforever.packet.PlanetSidePacket" id="net.psforever.packet.PlanetSidePacket" class="extype">PlanetSidePacket</a>) =&gt; <span name="scala.Boolean" class="extype">Boolean</span>]</span></span><p class="shortcomment cmt">Do not bundle these packets together with other packets
</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#preparedSlottedMetaPackets" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="preparedSlottedMetaPackets:Array[net.psforever.packet.control.SlottedMetaPacket]" class="anchorToMember"></a><a id="preparedSlottedMetaPackets:Array[SlottedMetaPacket]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#preparedSlottedMetaPackets:Array[net.psforever.packet.control.SlottedMetaPacket]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">preparedSlottedMetaPackets</span><span class="result">: <span name="scala.Array" class="extype">Array</span>[<a href="../../packet/control/SlottedMetaPacket.html" name="net.psforever.packet.control.SlottedMetaPacket" id="net.psforever.packet.control.SlottedMetaPacket" class="extype">SlottedMetaPacket</a>]</span></span><p class="shortcomment cmt">History of created <code>SlottedMetaPacket</code>s.</p><div class="fullcomment"><div class="comment cmt"><p>History of created <code>SlottedMetaPacket</code>s.
In case the client does not register receiving a packet by checking against packet subslot index numbers,
it will dispatch a <code>RelatedA</code> packet,
and the server will hopefully locate the packet where it has been backlogged.
The client will also dispatch a <code>RelatedB</code> packet to indicate the packet with the highest subslot received.
All packets with subslots less than that number have been received or will no longer be requested.
The client and server supposedly maintain reciprocating mechanisms.
</p></div></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#processInReorderQueue" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="processInReorderQueue():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#processInReorderQueue():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">processInReorderQueue</span><span class="params">()</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><p class="shortcomment cmt">Examine inbound packets that need to be reordered by sequence number and
pass all packets that are now in the correct order and
pass packets that have been kept waiting for too long in the queue.</p><div class="fullcomment"><div class="comment cmt"><p>Examine inbound packets that need to be reordered by sequence number and
pass all packets that are now in the correct order and
pass packets that have been kept waiting for too long in the queue.
Set the recorded inbound sequence number to belong to the greatest packet removed from the queue.</p></div><dl class="attributes block"><dt>See also</dt><dd><span class="cmt"><p><code>processInReorderQueueTimeoutOnly</code></p></span></dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#processInReorderQueueTimeoutOnly" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="processInReorderQueueTimeoutOnly():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#processInReorderQueueTimeoutOnly():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">processInReorderQueueTimeoutOnly</span><span class="params">()</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><p class="shortcomment cmt">Examine inbound packets that need to be reordered by sequence number and
pass packets that have been kept waiting for too long in the queue.</p><div class="fullcomment"><div class="comment cmt"><p>Examine inbound packets that need to be reordered by sequence number and
pass packets that have been kept waiting for too long in the queue.
Set the recorded inbound sequence number to belong to the greatest packet removed from the queue.
This may run during the scheduled check on the in-order queue after the outbound bundling process.
</p></div></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#processOutQueueBundle" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="processOutQueueBundle():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#processOutQueueBundle():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">processOutQueueBundle</span><span class="params">()</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><p class="shortcomment cmt">Outbound packets that have not been caught by other guards need to be bundled
and placed into <code>SlottedMetaPacket</code> messages.</p><div class="fullcomment"><div class="comment cmt"><p>Outbound packets that have not been caught by other guards need to be bundled
and placed into <code>SlottedMetaPacket</code> messages.
Multiple packets in one bundle have to be placed into a <code>MultiPacketEx</code> message wrapper
before being placed into the <code>SlottedMetaPacket</code>.
Packets that are too big for the MTU must go on to be split into smaller portions that will be wrapped individually.
Once queued, the first bundle is dispatched to the network.
</p></div></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#processQueue" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="processQueue():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#processQueue():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">processQueue</span><span class="params">()</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><p class="shortcomment cmt">Periodically deal with these concerns:
the bundling and throttling of outgoing packets
and the reordering of out-of-sequence incoming packets.</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#processRequestsForMissingSubslots" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="processRequestsForMissingSubslots():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#processRequestsForMissingSubslots():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">processRequestsForMissingSubslots</span><span class="params">()</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><p class="shortcomment cmt">Make requests for missing <code>SlottedMetaPackets</code>.</p><div class="fullcomment"><div class="comment cmt"><p>Make requests for missing <code>SlottedMetaPackets</code>.</p></div><dl class="attributes block"><dt>See also</dt><dd><span class="cmt"><p><code>inSubslotsMissingRequestFuncs</code></p></span><span class="cmt"><p><code>inSubslotsMissingRequestsFinished</code></p></span><span class="cmt"><p><code>RelatedA</code></p></span></dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#random" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="random:java.security.SecureRandom" class="anchorToMember"></a><a id="random:SecureRandom" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#random:java.security.SecureRandom" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">random</span><span class="result">: <a href="https://docs.oracle.com/javase/8/docs/api/java/security/SecureRandom.html#java.security.SecureRandom" name="java.security.SecureRandom" id="java.security.SecureRandom" class="extype">SecureRandom</a></span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#randomBytes" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="randomBytes(amount:Int):scodec.bits.ByteVector" class="anchorToMember"></a><a id="randomBytes(Int):ByteVector" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#randomBytes(amount:Int):scodec.bits.ByteVector" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">randomBytes</span><span class="params">(<span name="amount">amount: <span name="scala.Int" class="extype">Int</span></span>)</span><span class="result">: <span name="scodec.bits.ByteVector" class="extype">ByteVector</span></span></span><p class="shortcomment cmt">A random series of bytes used as a challenge value.</p><div class="fullcomment"><div class="comment cmt"><p>A random series of bytes used as a challenge value.</p></div><dl class="paramcmts block"><dt class="param">amount</dt><dd class="cmt"><p>the number of bytes</p></dd><dt>returns</dt><dd class="cmt"><p>a random series of bytes</p></dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#send" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="send(packet:net.psforever.packet.PlanetSidePacket,sequence:Option[Int],crypto:Option[net.psforever.packet.PacketCoding.CryptoCoding]):scodec.bits.ByteVector" class="anchorToMember"></a><a id="send(PlanetSidePacket,Option[Int],Option[CryptoCoding]):ByteVector" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#send(packet:net.psforever.packet.PlanetSidePacket,sequence:Option[Int],crypto:Option[net.psforever.packet.PacketCoding.CryptoCoding]):scodec.bits.ByteVector" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">send</span><span class="params">(<span name="packet">packet: <a href="../../packet/PlanetSidePacket.html" name="net.psforever.packet.PlanetSidePacket" id="net.psforever.packet.PlanetSidePacket" class="extype">PlanetSidePacket</a></span>, <span name="sequence">sequence: <span name="scala.Option" class="extype">Option</span>[<span name="scala.Int" class="extype">Int</span>]</span>, <span name="crypto">crypto: <span name="scala.Option" class="extype">Option</span>[<a href="../../packet/PacketCoding$$CryptoCoding.html" name="net.psforever.packet.PacketCoding.CryptoCoding" id="net.psforever.packet.PacketCoding.CryptoCoding" class="extype">CryptoCoding</a>]</span>)</span><span class="result">: <span name="scodec.bits.ByteVector" class="extype">ByteVector</span></span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#send" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="send(packet:net.psforever.packet.PlanetSideGamePacket):scodec.bits.ByteVector" class="anchorToMember"></a><a id="send(PlanetSideGamePacket):ByteVector" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#send(packet:net.psforever.packet.PlanetSideGamePacket):scodec.bits.ByteVector" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">send</span><span class="params">(<span name="packet">packet: <a href="../../packet/PlanetSideGamePacket.html" name="net.psforever.packet.PlanetSideGamePacket" id="net.psforever.packet.PlanetSideGamePacket" class="extype">PlanetSideGamePacket</a></span>)</span><span class="result">: <span name="scodec.bits.ByteVector" class="extype">ByteVector</span></span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#send" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="send(packet:net.psforever.packet.PlanetSideCryptoPacket):scodec.bits.ByteVector" class="anchorToMember"></a><a id="send(PlanetSideCryptoPacket):ByteVector" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#send(packet:net.psforever.packet.PlanetSideCryptoPacket):scodec.bits.ByteVector" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">send</span><span class="params">(<span name="packet">packet: <a href="../../packet/PlanetSideCryptoPacket.html" name="net.psforever.packet.PlanetSideCryptoPacket" id="net.psforever.packet.PlanetSideCryptoPacket" class="extype">PlanetSideCryptoPacket</a></span>)</span><span class="result">: <span name="scodec.bits.ByteVector" class="extype">ByteVector</span></span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#send" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="send(packet:net.psforever.packet.PlanetSideControlPacket):scodec.bits.ByteVector" class="anchorToMember"></a><a id="send(PlanetSideControlPacket):ByteVector" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#send(packet:net.psforever.packet.PlanetSideControlPacket):scodec.bits.ByteVector" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">send</span><span class="params">(<span name="packet">packet: <a href="../../packet/PlanetSideControlPacket.html" name="net.psforever.packet.PlanetSideControlPacket" id="net.psforever.packet.PlanetSideControlPacket" class="extype">PlanetSideControlPacket</a></span>)</span><span class="result">: <span name="scodec.bits.ByteVector" class="extype">ByteVector</span></span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#sendFirstBundle" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="sendFirstBundle():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#sendFirstBundle():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">sendFirstBundle</span><span class="params">()</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><p class="shortcomment cmt">Take the first fully-prepared packet from the queue of prepared packets and send it to the client.</p><div class="fullcomment"><div class="comment cmt"><p>Take the first fully-prepared packet from the queue of prepared packets and send it to the client.
Assign the dispatched packet the latest sequence number.
Do not call unless confident the the queue has at least one element.</p></div><dl class="attributes block"><dt>Exceptions thrown</dt><dd><span class="cmt"><p><span name="NoSuchElementException" class="extype"><code>NoSuchElementException</code></span> if there is no packet to dequeue</p></span></dd><dt>See also</dt><dd><span class="cmt"><p><code>SlottedMetaPacket</code></p></span></dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#serverMACBuffer" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="serverMACBuffer:scodec.bits.ByteVector" class="anchorToMember"></a><a id="serverMACBuffer:ByteVector" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#serverMACBuffer:scodec.bits.ByteVector" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">var</span></span> <span class="symbol"><span class="name">serverMACBuffer</span><span class="result">: <span name="scodec.bits.ByteVector" class="extype">ByteVector</span></span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#smp" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="smp(slot:Int,data:scodec.bits.ByteVector):net.psforever.packet.control.SlottedMetaPacket" class="anchorToMember"></a><a id="smp(Int,ByteVector):SlottedMetaPacket" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#smp(slot:Int,data:scodec.bits.ByteVector):net.psforever.packet.control.SlottedMetaPacket" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">smp</span><span class="params">(<span name="slot">slot: <span name="scala.Int" class="extype">Int</span></span>, <span name="data">data: <span name="scodec.bits.ByteVector" class="extype">ByteVector</span></span>)</span><span class="result">: <a href="../../packet/control/SlottedMetaPacket.html" name="net.psforever.packet.control.SlottedMetaPacket" id="net.psforever.packet.control.SlottedMetaPacket" class="extype">SlottedMetaPacket</a></span></span><p class="shortcomment cmt">Create a new <code>SlottedMetaPacket</code> with the sequence number filled in and the packet added to the history.</p><div class="fullcomment"><div class="comment cmt"><p>Create a new <code>SlottedMetaPacket</code> with the sequence number filled in and the packet added to the history.</p></div><dl class="paramcmts block"><dt class="param">slot</dt><dd class="cmt"><p>the slot for this packet, which influences the type of SMP</p></dd><dt class="param">data</dt><dd class="cmt"><p>hexadecimal data, the encoded packets to be placed in the SMP</p></dd><dt>returns</dt><dd class="cmt"><p>the packet</p></dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#smpHistoryLength" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="smpHistoryLength:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#smpHistoryLength:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">val</span></span> <span class="symbol"><span class="name">smpHistoryLength</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#splitPacket" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="splitPacket(packet:scodec.bits.BitVector):Seq[net.psforever.packet.PlanetSideControlPacket]" class="anchorToMember"></a><a id="splitPacket(BitVector):Seq[PlanetSideControlPacket]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#splitPacket(packet:scodec.bits.BitVector):Seq[net.psforever.packet.PlanetSideControlPacket]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">splitPacket</span><span class="params">(<span name="packet">packet: <span name="scodec.bits.BitVector" class="extype">BitVector</span></span>)</span><span class="result">: <span name="scala.Seq" class="extype">Seq</span>[<a href="../../packet/PlanetSideControlPacket.html" name="net.psforever.packet.PlanetSideControlPacket" id="net.psforever.packet.PlanetSideControlPacket" class="extype">PlanetSideControlPacket</a>]</span></span><p class="shortcomment cmt">Split packet into multiple chunks (if necessary).</p><div class="fullcomment"><div class="comment cmt"><p>Split packet into multiple chunks (if necessary).
Split packets are wrapped in a <code>HandleGamePacket</code> and sent as <code>SlottedMetaPacket4</code>.
The purpose of <code>SlottedMetaPacket4</code> may or may not be to indicate a split packet.
</p></div></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#start" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="start():akka.actor.typed.Behavior[net.psforever.actors.net.MiddlewareActor.Command]" class="anchorToMember"></a><a id="start():Behavior[Command]" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#start():akka.actor.typed.Behavior[net.psforever.actors.net.MiddlewareActor.Command]" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">start</span><span class="params">()</span><span class="result">: <span name="akka.actor.typed.Behavior" class="extype">Behavior</span>[<a href="MiddlewareActor$$Command.html" name="net.psforever.actors.net.MiddlewareActor.Command" id="net.psforever.actors.net.MiddlewareActor.Command" class="extype">Command</a>]</span></span></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#subslotMissingProcessor" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="subslotMissingProcessor:akka.actor.Cancellable" class="anchorToMember"></a><a id="subslotMissingProcessor:Cancellable" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#subslotMissingProcessor:akka.actor.Cancellable" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">var</span></span> <span class="symbol"><span class="name">subslotMissingProcessor</span><span class="result">: <span name="akka.actor.Cancellable" class="extype">Cancellable</span></span></span><p class="shortcomment cmt">Timer that handles the bundling and throttling of outgoing packets requesting packets with known subslot numbers</p></li><li class="indented0 " name="scala.AnyRef#synchronized" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="synchronized[T0](x$1:=&gt;T0):T0" class="anchorToMember"></a><a id="synchronized[T0](=&gt;T0):T0" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#synchronized[T0](x$1:=&gt;T0):T0" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">synchronized</span><span class="tparams">[<span name="T0">T0</span>]</span><span class="params">(<span name="arg0">arg0: =&gt; <span name="java.lang.AnyRef.synchronized.T0" class="extype">T0</span></span>)</span><span class="result">: <span name="java.lang.AnyRef.synchronized.T0" class="extype">T0</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd></dl></div></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#timesInReorderQueue" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="timesInReorderQueue:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#timesInReorderQueue:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">var</span></span> <span class="symbol"><span class="name">timesInReorderQueue</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span><p class="shortcomment cmt">end of life stat</p></li><li class="indented0 " name="net.psforever.actors.net.MiddlewareActor#timesSubslotMissing" group="Ungrouped" fullComment="no" data-isabs="false" visbl="pub"><a id="timesSubslotMissing:Int" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#timesSubslotMissing:Int" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">var</span></span> <span class="symbol"><span class="name">timesSubslotMissing</span><span class="result">: <span name="scala.Int" class="extype">Int</span></span></span><p class="shortcomment cmt">end of life stat</p></li><li class="indented0 " name="scala.AnyRef#toString" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="toString():String" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#toString():String" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier"></span> <span class="kind">def</span></span> <span class="symbol"><span class="name">toString</span><span class="params">()</span><span class="result">: <a href="https://docs.oracle.com/javase/8/docs/api/java/lang/String.html#java.lang.String" name="java.lang.String" id="java.lang.String" class="extype">String</a></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef → Any</dd></dl></div></li><li class="indented0 " name="scala.AnyRef#wait" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="wait():Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#wait():Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">wait</span><span class="params">()</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd><dt>Annotations</dt><dd><span class="name">@throws</span><span class="args">(<span><span class="defval">classOf[java.lang.InterruptedException]</span></span>)</span> </dd></dl></div></li><li class="indented0 " name="scala.AnyRef#wait" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="wait(x$1:Long,x$2:Int):Unit" class="anchorToMember"></a><a id="wait(Long,Int):Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#wait(x$1:Long,x$2:Int):Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">wait</span><span class="params">(<span name="arg0">arg0: <span name="scala.Long" class="extype">Long</span></span>, <span name="arg1">arg1: <span name="scala.Int" class="extype">Int</span></span>)</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd><dt>Annotations</dt><dd><span class="name">@throws</span><span class="args">(<span><span class="defval">classOf[java.lang.InterruptedException]</span></span>)</span> </dd></dl></div></li><li class="indented0 " name="scala.AnyRef#wait" group="Ungrouped" fullComment="yes" data-isabs="false" visbl="pub"><a id="wait(x$1:Long):Unit" class="anchorToMember"></a><a id="wait(Long):Unit" class="anchorToMember"></a> <span class="permalink"><a href="../../../../net/psforever/actors/net/MiddlewareActor.html#wait(x$1:Long):Unit" title="Permalink"><i class="material-icons"></i></a></span> <span class="modifier_kind"><span class="modifier">final </span> <span class="kind">def</span></span> <span class="symbol"><span class="name">wait</span><span class="params">(<span name="arg0">arg0: <span name="scala.Long" class="extype">Long</span></span>)</span><span class="result">: <span name="scala.Unit" class="extype">Unit</span></span></span><div class="fullcomment"><dl class="attributes block"><dt>Definition Classes</dt><dd>AnyRef</dd><dt>Annotations</dt><dd><span class="name">@throws</span><span class="args">(<span><span class="defval">classOf[java.lang.InterruptedException]</span></span>)</span> <span class="name">@native</span><span class="args">()</span> </dd></dl></div></li></ol></div></div><div id="inheritedMembers"><div name="scala.AnyRef" class="parent"><h3>Inherited from <span name="scala.AnyRef" class="extype">AnyRef</span></h3></div><div name="scala.Any" class="parent"><h3>Inherited from <span name="scala.Any" class="extype">Any</span></h3></div></div><div id="groupedMembers"><div name="Ungrouped" class="group"><h3>Ungrouped</h3></div></div></div><div id="tooltip"></div><div id="footer"></div></body></div></div></div></body></html>
